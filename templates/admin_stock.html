{% extends "base.html" %}

{% block title %}Прихід у ємність{% endblock %}

{% block content %}
<h1>Прихід напряму в ємність</h1>

<div class="card">
    <h2 style="margin-top:0;">Нова операція приходу</h2>
    <form method="post">
        <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:flex-end;">
            <div>
                <label>Ємність</label><br>
                <select name="container_id" required style="min-width:260px;">
                    <option value="">Оберіть ємність</option>
                    {% for c in containers %}
                        <option value="{{ c.id }}">
                            [ID {{ c.id }}] {{ c.material_code }} – {{ c.material_name }}
                            ({{ '%.3f'|format(c.balance|float) }} {{ c.material_unit }}) – {{ c.location_name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label>Кількість</label><br>
                <input type="text" name="qty" required placeholder="наприклад, 1.0">
            </div>
            <div style="flex:1;">
                <label>Замовлення / робота (опціонально)</label><br>
                <input type="text" name="job" style="width:100%;" placeholder="Номер замовлення, причина тощо">
            </div>
            <div>
                <button class="btn btn-primary" type="submit">Зберегти прихід</button>
            </div>
        </div>
    </form>
</div>

<div class="card">
    <h2 style="margin-top:0;">Поточні залишки в ємностях</h2>
    {% if not containers %}
        <p class="muted">Немає жодної ємності.</p>
    {% else %}
        <div style="overflow-x:auto;">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Матеріал</th>
                    <th>Локація</th>
                    <th>Залишок</th>
                    <th>Од. виміру</th>
                </tr>
                </thead>
                <tbody>
                {% for c in containers %}
                    <tr>
                        <td>{{ c.id }}</td>
                        <td>{{ c.material_code }} – {{ c.material_name }}</td>
                        <td>{{ c.location_name }}</td>
                        <td>{{ '%.3f'|format(c.balance|float) }}</td>
                        <td>{{ c.material_unit }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>
{% endblock %}
